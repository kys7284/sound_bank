<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
 
<mapper namespace="com.boot.sound.fund.FundRepository">

    <!-- 펀드상품 목록 -->
    <select id="fundList" resultType="com.boot.sound.fund.FundDTO">
        SELECT * FROM fund_tbl
         ORDER BY fund_id ASC
    </select>
    
    <!-- 펀드상품 등록 -->
    <insert id="insertFund" parameterType="com.boot.sound.fund.FundDTO">
        INSERT INTO fund_tbl(fund_id, fund_name, fund_company, fund_type, fund_grade, fund_fee_rate, fund_upfront_fee, return_1m, return_3m, return_6m, return_12m)
        VALUES((SELECT IFNULL(MAX(fund_id)+1,1) FROM fund_tbl),
                                #{fund_name},
                                #{fund_company},
                                #{fund_type},
                                #{fund_grade},
                                #{fund_fee_rate},
                                #{fund_upfront_fee},
                                #{return_1m},
                                #{return_3m},
                                #{return_6m},
                                #{return_12m})
    </insert>
    
    <!-- 펀드상품 상세보기 (1건 조회) -->
    <select id="findById" resultType="com.boot.sound.fund.FundDTO">
        SELECT * FROM fund_tbl
        WHERE fund_id = #{fund_id}
    </select>
    
    <!-- 펀드상품 수정 -->
    <update id="updateFund" parameterType="com.boot.sound.fund.FundDTO">
        UPDATE fund_tbl
        SET fund_name = #{fund_name},
            fund_company = #{fund_company},
            fund_type = #{fund_type},
            fund_grade = #{fund_grade},
            fund_fee_rate = #{fund_fee_rate},
            fund_upfront_fee = #{fund_upfront_fee},
            return_1m = #{return_1m},
            return_3m = #{return_3m},
            return_6m = #{return_6m},
            return_12m = #{return_12m}
        WHERE fund_id = #{fund_id}
    </update>
    
    <!-- 펀드상품 삭제 -->
    <delete id="deleteFund" parameterType="com.boot.sound.fund.FundDTO">
        DELETE FROM fund_tbl
        WHERE fund_id = #{fund_id}
    </delete>

</mapper>