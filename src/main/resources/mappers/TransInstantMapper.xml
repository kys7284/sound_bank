<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.sound.transfer.instant.TransInstantDAO">

    <!-- 현재 이체한도 조회 -->
    <select id="getCurrentLimit" parameterType="map" resultType="int">
        SELECT requested_limit
        FROM transfer_tbl
        WHERE customer_id = #{customer_id}
          AND out_account_number = #{out_account_number}
          AND transfer_type = '한도'
        ORDER BY request_date DESC
        LIMIT 1
    </select>
    
    <!-- 오늘 이체한 총합 -->
	<select id="getTodayTotal" parameterType="String" resultType="BigDecimal">
	  SELECT IFNULL(SUM(amount), 0)
	  FROM transfer_tbl
	  WHERE customer_id = #{customer_id}
	    AND transfer_type = '이체'
	    AND DATE(transfer_date) = CURDATE()
	</select>

</mapper>
